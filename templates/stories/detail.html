{% extends 'base.html' %}
{% load static %}

{% block title %}{{ story.title }} - Story - GYWAN{% endblock %}

{% block content %}
<div class="elixir-news-wrap" style="display:flex;gap:48px;max-width:1200px;margin:0 auto;padding:60px 0;">
  <main class="elixir-news-main" style="flex:3;">
    <article class="elixir-news-card" style="background:#fff;border-radius:16px;box-shadow:0 4px 24px rgba(136,36,199,0.08);overflow:hidden;">
      {% if story.image %}
      <div class="elixir-news-img" style="width:100%;height:340px;overflow:hidden;background:#f3eaff;">
        <img src="{{ story.image.url }}" alt="{{ story.title }}" style="width:100%;height:100%;object-fit:cover;">
      </div>
      {% endif %}
      <div class="elixir-news-content" style="padding:32px 28px;">
        <h1 class="elixir-news-title" style="font-size:2rem;font-weight:700;color:#8824C7;margin-bottom:18px;">{{ story.title }}</h1>
        <div class="elixir-news-meta" style="color:#888;font-size:1rem;margin-bottom:18px;display:flex;gap:18px;flex-wrap:wrap;">
          <span><i class="fas fa-user"></i> {{ story.author }}</span>
          {% if story.location %}<span><i class="fas fa-map-marker-alt"></i> {{ story.location }}</span>{% endif %}
          <span><i class="fas fa-calendar"></i> {{ story.created_at|date:"M d, Y" }}</span>
        </div>
        <div class="elixir-news-social" style="margin-bottom:18px;display:flex;gap:16px;">
          {% if story.facebook_url %}<a href="{{ story.facebook_url }}" target="_blank" title="Facebook"><i class="fab fa-facebook"></i></a>{% endif %}
          {% if story.instagram_url %}<a href="{{ story.instagram_url }}" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>{% endif %}
          {% if story.youtube_url %}<a href="{{ story.youtube_url }}" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>{% endif %}
          {% if story.twitter_url %}<a href="{{ story.twitter_url }}" target="_blank" title="Twitter/X"><i class="fab fa-twitter"></i></a>{% endif %}
        </div>
        <div class="elixir-news-body" style="color:#444;font-size:1.08rem;line-height:1.7;margin-bottom:32px;">
          {{ story.content|linebreaks }}
        </div>
      </div>
    </article>
    <!-- Comments Section -->
    <section class="comments-section" style="background:#fff;border-radius:16px;box-shadow:0 4px 24px rgba(136,36,199,0.08);padding:32px 24px;margin-top:48px;">
      <h2 class="comments-title">Comments</h2>
      <form method="post" action="" class="comments-form" style="margin-bottom:32px;">
        {% csrf_token %}
        <input type="text" name="name" placeholder="Your Name" required class="comments-input">
        <input type="email" name="email" placeholder="Your Email" required class="comments-input">
        <textarea name="comment" rows="3" placeholder="Write your comment..." required class="comments-input"></textarea>
        <button type="submit" class="comments-btn">Submit</button>
      </form>
      <div class="comments-list">
        <h4 class="comments-subtitle">Recent Comments</h4>
        <ul>
          {% for comment in recent_comments %}
            <li class="comment-item">
              <span class="comment-text">{{ comment.text }}</span>
              <span class="comment-meta">by {{ comment.name }} ({{ comment.email }})</span>
              <span class="comment-date">{{ comment.created_at|date:"M d, Y H:i" }}</span>
            </li>
          {% empty %}
            <li>No comments yet.</li>
          {% endfor %}
        </ul>
      </div>
    </section>
  </main>
  <aside class="elixir-news-sidebar" style="flex:1;background:#fff;border-radius:16px;box-shadow:0 4px 24px rgba(136,36,199,0.08);padding:32px 24px;min-width:260px;max-width:320px;height:fit-content;">
    <div class="sidebar-block">
      <h4 class="sidebar-title">Useful Links</h4>
      <ul class="sidebar-list">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'about' %}">About</a></li>
        <li><a href="{% url 'resources' %}">Resources</a></li>
        <li><a href="{% url 'events' %}">Events</a></li>
        <li><a href="{% url 'contact' %}">Contact</a></li>
      </ul>
    </div>
  </aside>
</div>
{% endblock %}

{% block extra_css %}
<style>
.elixir-news-wrap {
  display: flex;
  gap: 40px;
  max-width: 1100px;
  margin: 0 auto;
  padding: 48px 0;
}

.elixir-news-main {
  flex: 3;
}

.elixir-news-card {
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 6px 32px rgba(136, 36, 199, 0.10);
  overflow: hidden;
  margin-bottom: 32px;
}

.elixir-news-img {
  width: 100%;
  height: 320px;
  overflow: hidden;
  background: #f3eaff;
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.elixir-news-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.elixir-news-content {
  padding: 32px 28px 28px 28px;
}

.elixir-news-title {
  font-size: 2.1rem;
  font-weight: 800;
  color: #7C1BB2;
  margin-bottom: 16px;
}

.elixir-news-meta {
  color: #888;
  font-size: 1rem;
  margin-bottom: 16px;
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}

.elixir-news-social {
  margin-bottom: 16px;
  display: flex;
  gap: 16px;
}

.elixir-news-social a {
  color: #8824C7;
  font-size: 1.2rem;
  transition: color 0.2s;
}

.elixir-news-social a:hover {
  color: #FFDE2F;
}

.elixir-news-body {
  color: #333;
  font-size: 1.08rem;
  line-height: 1.75;
  margin-bottom: 24px;
}

.elixir-news-sidebar {
  flex: 1;
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 6px 32px rgba(136, 36, 199, 0.10);
  padding: 32px 22px;
  min-width: 240px;
  max-width: 320px;
  height: fit-content;
}

.sidebar-block {
  margin-bottom: 28px;
}

.sidebar-title {
  font-size: 1.08rem;
  font-weight: 700;
  color: #7C1BB2;
  margin-bottom: 10px;
}

.sidebar-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.sidebar-list li {
  margin-bottom: 7px;
}

.sidebar-list a {
  color: #8824C7;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s;
}

.sidebar-list a:hover {
  color: #FFDE2F;
}

.comments-section {
  background: #f8f9fa;
  border-radius: 18px;
  box-shadow: 0 2px 12px rgba(136, 36, 199, 0.07);
  padding: 28px 22px;
  margin-top: 32px;
}

.comments-title {
  font-size: 1.15rem;
  font-weight: 700;
  color: #7C1BB2;
  margin-bottom: 14px;
}

.comments-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 24px;
}

.comments-input {
  border: 1.5px solid #7C1BB2;
  border-radius: 10px;
  padding: 10px;
  font-size: 1rem;
  resize: vertical;
  background: #fff;
}

.comments-btn {
  background: linear-gradient(90deg,#8824C7,#FFDE2F);
  color: #fff;
  border: none;
  border-radius: 20px;
  padding: 8px 20px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.comments-btn:hover {
  background: linear-gradient(90deg,#A13AFF,#7C1BB2);
}

.comments-list {
  margin-top: 18px;
}

.comments-subtitle {
  font-size: 1rem;
  font-weight: 600;
  color: #7C1BB2;
  margin-bottom: 10px;
}

.comment-item {
  padding: 8px 0;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.comment-text {
  color: #444;
}

.comment-meta {
  color: #888;
  font-size: 0.92rem;
  margin-left: 8px;
}

.comment-date {
  color: #888;
  font-size: 0.92rem;
}

@media (max-width: 900px) {
  .elixir-news-wrap {
    flex-direction: column;
    gap: 0;
  }

  .elixir-news-sidebar {
    margin-top: 0;
    max-width: 100%;
    min-width: 0;
    padding: 24px 10px;
  }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
function shareOnFacebook() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('{{ story.title }}');
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=600,height=400');
}

function shareOnTwitter() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('{{ story.title }} - GYWAN Success Story');
    window.open(`https://twitter.com/intent/tweet?url=${url}&text=${title}`, '_blank', 'width=600,height=400');
}

function shareOnLinkedIn() {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`, '_blank', 'width=600,height=400');
}

function copyToClipboard() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        const btn = document.querySelector('.social-btn.copy');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
        setTimeout(() => {
            btn.innerHTML = originalText;
        }, 2000);
    });
}
</script>
{% endblock %}
